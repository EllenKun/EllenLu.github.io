# HTML更别提了

+ DOCTYPE：指示浏览器关于页面使用什么模式解析文档
+ HTML5只需要写`<!DOCTYPE HTML>`不需要引入DTD：不基于SGML
+ DTD：它们定义 XML 或 HTML 的特定版本中所有允许元素及它们的属性和层次关系的定义。在解析网页时，浏览器将使用这些规则检查页面的有效性并且采取相应的措施。  
+ link标签: 定义文档与外部资源的关系
+ 操作DOM慢：引起重排和重绘，导致性能消耗

### SGML、HTML、XML和XHTML的区别  
+ SGML（Standard Generalized Markup language）是标准通用置标语言，是一种定义电子文档结构和描述其内容的国际标准语言，是所有电子文档标记语言的起源。  
+ HTML（HyperText Markup Language）是超文本标记语言，主要是用于规定怎么显示网页。

+ XML（Extensible Markup Language）是可扩展标记语言是未来网页语言的发展方向，XML 和 HTML 的最大区别就在于 XML 的标签是可以自己创建的，数量无限多，而 HTML 的标签都是固定的而且数量有限。  

+ XHTML（Extensible Hypertext Markup Language）也是现在基本上所有网页都在用的标记语言，他其实和 HTML 没什么本质的区别，标签都一样，用法也都一样，就是比 HTML 更严格，比如标签必须都用小写，标签都必须有闭合标签等。

### 浏览器内核
渲染引擎：在浏览器窗口中显示所请求的内容
JS引擎：解析和执行JS来实现网页动态效果

### 浏览器的渲染原理
1. 解析收到的文档，根据文档定义DOM树，DOM树由DOM元素及其属性节点组成
2. 对CSS解析，生成CSSOM规则树
3. 根据DOM树和CSSOM规则树构建渲染树。渲染树的节点被称作渲染对象，和DOM元素对应
4. 根据渲染树来进行布局（回流/自动重排）
5. 布局结束后进行绘制，将内容展示在屏幕上

### 渲染过程中遇到JS
JavaScript 的加载、解析与执行会阻塞文档的解析，也就是说，在构建 DOM 时，HTML 解析器若遇到了 JavaScript，那么它会暂停文档的解析，将控制权移交给 JavaScript 引擎，等 JavaScript 引擎运行完毕，浏览器再从中断的地方恢复继续解析文档。  
首屏不加载JS，或script放在body标签的底部，给 script 标签添加 defer 或者 async 属性  

### 重排(回流)和重绘
重绘：当渲染树中的一些元素需要更新属性，而这些属性只是影响元素的外观、风格，而不会影响布局的操作
重排：当渲染树中的一部分（或全部）因为元素的规模尺寸、布局、隐藏等改变而需要重新构建的操作，会影响到布局的操作  
重排一定发生重绘，重绘不一定重排
  

### HTML5新特性
绘画canvas, 用于媒介回放的video和audio, 本地离线存储localStorage,sessionStorage，语义化标签header footer，websocket


### HTML5语义化
1. 使页面的内容结构化，结构更清晰，便于对浏览器和搜索引擎解析
2. 有利于SEO
3. 选择合适的标签，开发者容易理解



### HTML5离线存储
用户未联网时也可以正常访问站点或应用，联网时更新用户机器上的缓存文件。  
原理：HTML的离线存储是基于一个新建的.appcache文件的缓存机制，通过这个文件上的解析清单离线存储资源，这些资源就会像 cookie 一样被存储了下来。之后当网络在处于离线状态下时，浏览器会通过被离线存储的数据进行页面展示。  


### 常见的浏览器端的存储技术
cookie, localStorage和sessionStorage
SessionStorage， LocalStorage， Cookie 这三者都可以被用来在浏览器端存储数据，而且都是字符串类型的键值对。区别在于前两者属于 HTML5 WebStorage，创建它们的目的便于客户端存储数据。而 cookie 是网站为了标示用户身份而储存在用户本地终端上的数据（通常经过加密）。cookie 数据始终在同源（协议、主机、端口相同）的 http 请求中携带（即使不需要），会在浏览器和服务器间来回传递。  
cookie:数据不超过4KB，在所有同源窗口中都是共享的，在设置的cookie过期时间之前一直有效  
localStorage:浏览器本地存储，5M或更大的数据，除非手动删除否则不会失效，在同源窗口共享
sessionStorage:浏览器本地存储，一次会话中所保存的数据，当前窗口关闭后失效。

### 前端需要注意的SEO
1. 合理的title,description和keywords 
2. 语义化的HTML代码，符合W3C规范
3. 重要的内容HTML代码放在最前面：搜索引擎抓取HTML是从上到下的顺序
4. 重要内容不用JS输出，爬虫不执行JS获取内容
5. 提高网站速度

### 实现浏览器内多个标签页之间的通信
1. websocket协议，通信的标签页连接同一个服务器，发送消息到服务器后，服务器推送消息给所有连接的客户端。  
2. 调用localStorage，cookies本地存储方式；ocalStorge 另一个浏览上下文里被添加、修改或删除时，它都会触发一个 storage 事件，我们通过监听 storage 事件，控制它的值来进行页面信息通信  

### 画1px高的线
```css
<div style="height:1px;overflow:hidden;background:red"></div>
```
### head标签中比不少的是
`<head>` 标签用于定义文档的头部，它是所有头部元素的容器。`<head>` 中的元素可以引用脚本、指示浏览器在哪里找到样式表、提供
元信息等等。

文档的头部描述了文档的各种属性和信息，包括文档的标题、在 Web 中的位置以及和其他文档的关系等。绝大多数文档头部包含的数
据都不会真正作为内容显示给读者。

下面这些标签可用在 head 部分：`<base>, <link>, <meta>, <script>, <style>`, 以及 `<title>`。

`<title>` 定义文档的标题，它是 head 部分中唯一必需的元素。

### 前端性能优化
前端性能优化主要是为了提高页面的加载速度，优化用户的访问体验。我认为可以从这些方面来进行优化。

第一个方面是页面的内容方面

（1）通过文件合并、css 雪碧图、使用 base64 等方式来减少 HTTP 请求数，避免过多的请求造成等待的情况。

（2）通过 DNS 缓存等机制来减少 DNS 的查询次数。

（3）通过设置缓存策略，对常用不变的资源进行缓存。

（4）使用延迟加载的方式，来减少页面首屏加载时需要请求的资源。延迟加载的资源当用户需要访问时，再去请求加载。

（5）通过用户行为，对某些资源使用预加载的方式，来提高用户需要访问资源时的响应速度。

第二个方面是服务器方面

（1）使用 CDN 服务，来提高用户对于资源请求时的响应速度。

（2）服务器端启用 Gzip、Deflate 等方式对于传输的资源进行压缩，减小文件的体积。

（3）尽可能减小 cookie 的大小，并且通过将静态资源分配到其他域名下，来避免对静态资源请求时携带不必要的 cookie

第三个方面是 CSS 和 JavaScript 方面

（1）把样式表放在页面的 head 标签中，减少页面的首次渲染的时间。

（2）避免使用 @import 标签。

（3）尽量把 js 脚本放在页面底部或者使用 defer 或 async 属性，避免脚本的加载和执行阻塞页面的渲染。

（4）通过对 JavaScript 和 CSS 的文件进行压缩，来减小文件的体积。


### 二维码扫描登陆
 核心过程应该是：浏览器获得一个临时 id，通过长连接等待客户端扫描带有此 id 的二维码后，从长连接中获得客户端上报给 serv
 er的帐号信息进行展示。并在客户端点击确认后，获得服务器授信的令牌，进行随后的信息交互过程。在超时、网络断开、其他设备
 上登录后，此前获得的令牌或丢失、或失效，对授权过程形成有效的安全防护。

 我的理解

 二维码登录网页的基本原理是，用户进入登录网页后，服务器生成一个 uid 来标识一个用户。对应的二维码对应了一个对应 uid 
 的链接，任何能够识别二维码的应用都可以获得这个链接，但是它们没有办法和对应登录的服务器响应。比如微信的二维码登录，只
 有用微信识这个二维码才有效。当微信客户端打开这个链接时，对应的登录服务器就获得了用户的相关信息。这个时候登录网页根据
 先前的长连接获取到服务器传过来的用户信息进行显示。然后提前预加载一些登录后可能用到的信息。当客户端点击确认授权登陆后，
 服务器生成一个权限令牌给网页，网页之后使用这个令牌进行信息的交互过程。由于整个授权的过程都是在手机端进行的，因此能够
 很好的防止 PC 上泛滥的病毒。并且在超时、网络断开、其他设备上登录后，此前获得的令牌或丢失、或失效，对授权过程能够形成
 有效的安全防护。